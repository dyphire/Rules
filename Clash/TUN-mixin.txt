mixin: # object
  hosts:       # fake-ip 模式下不生效
    'bbs.acgrip.com': 47.240.95.103
    'dmhy.org': 104.25.27.31
    '*.dmhy.org': 104.25.27.31
    'hdchina.org': 104.20.9.218
    '*.hdchina.org': 104.20.9.218
    '*.m-team.cc': 104.26.13.50
  dns:
    enable: true
    ipv6: false
    listen: 0.0.0.0:53          # 监听本地的53端口
    enhanced-mode: redir-host   # or fake-ip
#   fake-ip-range: 198.18.0.1/16
#   use-hosts: true
#   fake-ip-filter: 
#     - '*.lan'   
#     - localhost.ptlogin2.qq.com
    nameserver-policy:
      'bbs.acgrip.com': 47.240.95.103
      'dmhy.org': 104.25.27.31
      '*.dmhy.org': 104.25.27.31
      'hdchina.org': 104.20.9.218
      '*.hdchina.org': 104.20.9.218
      '*.m-team.cc': 104.26.13.50
    default-nameserver:     # 用于解析 nameserver 里面 DoH/DoT 的域名
      - 223.5.5.5           # 阿里 AliDNS
      - 223.6.6.6           # 阿里 AliDNS
      - 119.29.29.29        # 腾讯 DNSPod DNS+
      - 182.254.116.116     # 腾讯 DNSPod DNS+
#     - 1.0.0.1             # Cloudflare DNS
#     - 1.1.1.1             # Cloudflare DNS
#     - 1.2.4.8             # CNNIC SDNS
#     - 210.2.4.8           # CNNIC SDNS
      - 114.114.114.114     # 114 DNS
      - 114.114.115.115     # 114 DNS
#     - 180.76.76.76        # 百度 BaiduDNS
#     - 117.50.11.11        # oneDNS
#     - 52.80.66.66         # oneDNS
      - 8.8.8.8             # Google DNS
#     - 8.8.4.4             # Google DNS
#     - 9.9.9.9             # IBM Quad9
#     - 4.2.2.1             # Level3 DNS
#     - 4.2.2.2             # Level3 DNS
#     - 208.67.222.222      # OpenDNS
#     - 208.67.220.220      # OpenDNS
#     - 199.91.73.222       # V2EX DNS
#     - 178.79.131.110      # V2EX DNS
#     - 185.222.222.222     # DNS.SB
#     - 185.184.222.222     # DNS.SB      
    nameserver:                              # 國內域名使用 nameserver 請求
      - tls://doh.pub:853
      - tls://dns.alidns.com:853
      - https://dns.alidns.com/dns-query     # Ali DoH
      - https://dns.pub/dns-query            # Tencent DoH
#     - https://dns.rubyfish.cn/dns-query    # Rubyfish DoH
#     - https://doh.opendns.com/dns-query    # OpenDNS DoH
      - https://223.5.5.5/dns-query
      - https://223.6.6.6/dns-query
#     - "[2400:3200::1]:53"                  # Ali IPv6 DNS
#     - "[2400:3200:baba::1]:53"             # Ali IPv6 DNS
#     - "[240C::6666]:53"                    # 天地互连 IPv6 DNS
#     - "[240C::6644]:53"                    # 天地互连 IPv6 DNS
    fallback:                                # 國外域名使用 fallback 請求 (没有被污染的DNS)
      - https://dns.google/dns-query         # Google DoH
      - https://cloudflare-dns.com/dns-query # Cloudflare DoH
      - https://public.dns.iij.jp/dns-query  # IIJ.JP DoH
      - https://dns.adguard.com/dns-query    # Adguard DoH
      - https://jp.tiar.app/dns-query
      - https://dns.switch.ch/dns-query      # SWITCH DoH
      - https://dns.east.comss.one/dns-query # Comss.ru DoH
      - https://dns.twnic.tw/dns-query       # Quad101 DoH
      - https://1.1.1.1/dns-query
      - tls://public.dns.iij.jp
      - tls://jp.tiar.app
      - tls://dns.switch.ch
      - tls://dns.east.comss.one
      - tls://dns.google
      - tls://dns.adguard.com
      - tls://1.1.1.1
      - tls://101.101.101.101
      - tls://dns.google:853
      - tls://1.1.1.1:853
      - tls://8.8.4.4:853
      - tls://1.0.0.1:853
#     - dhcp://en0                           # dns from dhcp
#     - 1.1.1.1                              # cloudflare
#     - 8.8.8.8                              # google
#     - "[2001:4860:4860::8888]:53"          # Google IPv6 DNS
#     - "[2001:4860:4860::8844]:53"          # Google IPv6 DNS
    fallback-filter:
      geoip: true     # 默认，当 geoip 匹配 geoip-code ，Clash 将使用 nameserver 查询的结果，否则 Clash 将仅使用 fallback 查询的结果
      geoip-code: CN
      ipcidr:         # 在这个网段内的 IP 地址会被考虑为被污染的 IP ，当 nameserver 查询的结果匹配这些 IP ，Clash 将使用 fallback 查询的结果
        - 0.0.0.0/8
        - 10.0.0.0/8
        - 100.64.0.0/10
        - 127.0.0.0/8
        - 169.254.0.0/16
        - 172.16.0.0/12
        - 192.168.0.0/16
        - 198.18.0.0/15
        - 224.0.0.0/3
        - 255.255.255.255/32
      domain:
        - +.google.com
        - +.facebook.com
        - +.twitter.com
        - +.youtube.com
        - +.xn--ngstr-lra8j.com
        - +.google.cn
        - +.googleapis.cn
        - +.googleapis.com
        - +.gvt1.com
        - +.github.com
        - +.githubusercontent.com
  tun:
    enable: true
    stack: gvisor # 使用 system 需要 Clash Premium 2021.05.08 及更高版本
    dns-hijack:
      - 198.18.0.2:53
    auto-route: true
    auto-detect-interface: true # 自动检测出口网卡
# wintun.dll 下载更新地址：https://www.wintun.net/
# tun网卡无网络权限解决方法
# 打开注册表路径 HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\NetworkConnectivityStatusIndicator
# 新建一个名为DisablePassivePolling的DWORD，值为0，重启
